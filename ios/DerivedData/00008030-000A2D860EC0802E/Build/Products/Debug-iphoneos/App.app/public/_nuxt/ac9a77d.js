(window.webpackJsonp=window.webpackJsonp||[]).push([[0,16],{343:function(e,t,o){var content=o(347);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(93).default)("29c48d31",content,!0,{sourceMap:!1})},345:function(e,t,o){"use strict";o.r(t);o(346);var n=o(60),component=Object(n.a)({},(function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("svg",{staticClass:"spinner",attrs:{viewBox:"0 0 50 50"}},[t("circle",{staticClass:"path",attrs:{cx:"25",cy:"25",r:"20",fill:"none","stroke-width":"5"}})])])}),[],!1,null,null,null);t.default=component.exports},346:function(e,t,o){"use strict";o(343)},347:function(e,t,o){var n=o(92)(!1);n.push([e.i,".spinner{-webkit-animation:rotate 2s linear infinite;animation:rotate 2s linear infinite;z-index:2;position:absolute;top:50%;left:50%;margin:-25px 0 0 -25px;width:50px;height:50px}.spinner .path{stroke:#fff;stroke-linecap:round;-webkit-animation:dash 1.5s ease-in-out infinite;animation:dash 1.5s ease-in-out infinite}@-webkit-keyframes rotate{to{transform:rotate(1turn)}}@keyframes rotate{to{transform:rotate(1turn)}}@-webkit-keyframes dash{0%{stroke-dasharray:1,150;stroke-dashoffset:0}50%{stroke-dasharray:90,150;stroke-dashoffset:-35}to{stroke-dasharray:90,150;stroke-dashoffset:-124}}@keyframes dash{0%{stroke-dasharray:1,150;stroke-dashoffset:0}50%{stroke-dasharray:90,150;stroke-dashoffset:-35}to{stroke-dasharray:90,150;stroke-dashoffset:-124}}",""]),e.exports=n},348:function(e,t,o){var content=o(358);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(93).default)("d74d4100",content,!0,{sourceMap:!1})},355:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTguNzk1MDYgMTUuODc1TDUuMzI1MDYgMTIuNDA1QzUuMTM4MjMgMTIuMjE3NyA0Ljg4NDU4IDEyLjExMjUgNC42MjAwNiAxMi4xMTI1QzQuMzU1NTQgMTIuMTEyNSA0LjEwMTg5IDEyLjIxNzcgMy45MTUwNiAxMi40MDVDMy41MjUwNiAxMi43OTUgMy41MjUwNiAxMy40MjUgMy45MTUwNiAxMy44MTVMOC4wOTUwNiAxNy45OTVDOC40ODUwNiAxOC4zODUgOS4xMTUwNiAxOC4zODUgOS41MDUwNiAxNy45OTVMMjAuMDg1MSA3LjQxNDk5QzIwLjQ3NTEgNy4wMjQ5OSAyMC40NzUxIDYuMzk0OTkgMjAuMDg1MSA2LjAwNDk5QzE5Ljg5ODIgNS44MTc3NCAxOS42NDQ2IDUuNzEyNTEgMTkuMzgwMSA1LjcxMjUxQzE5LjExNTUgNS43MTI1MSAxOC44NjE5IDUuODE3NzQgMTguNjc1MSA2LjAwNDk5TDguNzk1MDYgMTUuODc1WiIgZmlsbD0iI0JCNkJEOSIvPgo8L3N2Zz4K"},357:function(e,t,o){"use strict";o(348)},358:function(e,t,o){var n=o(92)(!1);n.push([e.i,"@-webkit-keyframes jiggle{0%{transform:rotate(-1deg)}50%{transform:rotate(1deg)}}@keyframes jiggle{0%{transform:rotate(-1deg)}50%{transform:rotate(1deg)}}.button-class{-webkit-animation:bounce 1s infinite;animation:bounce 1s infinite}.loader{border:16px solid #f3f3f3;border-top-color:#3498db;border-radius:50%;width:120px;height:120px;-webkit-animation:spin 2s linear infinite;animation:spin 2s linear infinite}@-webkit-keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}",""]),e.exports=n},371:function(e,t,o){"use strict";o.r(t);var n=o(12),c=(o(52),o(61),o(16),o(408)),r=o.n(c),l=(o(409),o(372)),f={components:{VueSlickCarousel:r.a,EffectIconButton:l.default},data:function(){return{canvasHeight:window.innerHeight,canvasWidth:window.innerWidth,deepARInstance:null,settings:{arrows:!1,centerMode:!0,centerPadding:"15%",focusOnSelect:!0,infinite:!0,slidesToShow:3,swipeToSlide:!0,speed:150},photoTaken:null,showVideoPreview:!1,showPhotoPreview:!1,mediaRecorder:null,longPressActive:!1,loadingEffect:""}},computed:{photo:function(){return this.$store.state.photo},video:function(){return this.$store.state.video},effectList:function(){return this.$store.state.effectList},faceTrackingModelReady:function(){return this.$store.state.faceTrackingModelReady}},methods:{onClickPhotoTick:function(){this.$emit("confirmPhoto")},onClickVideoTick:function(){this.$emit("confirmVideo")},onLongPressStart:function(e){e===this.$store.state.activeEffectIcon?(console.log("onLongPressStart",e),this.longPressActive=!0,this.initRecord()):console.log("onLongPressStart in FaceFilter: long press espaced, pressing ".concat(e," but center (activeEffectIcon) is ").concat(this.$store.state.activeEffectIcon))},onLongPressStop:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(e===t.$store.state.activeEffectIcon&&t.longPressActive){o.next=3;break}return console.log("onLongPressStop in FaceFilter: long press espaced"),o.abrupt("return");case 3:if(console.log("onLongPressStop",e),t.longPressActive=!1,!t.mediaRecorder||"inactive"===t.mediaRecorder.state){o.next=8;break}return o.next=8,t.mediaRecorder.stop();case 8:case"end":return o.stop()}}),o)})))()},initRecord:function(){var e=this;console.log("initRecord..");var video=document.querySelector("video");console.log("video ref",video);var t=document.getElementById("deepar-canvas").captureStream(30);this.mediaRecorder=new MediaRecorder(t),console.log("mediaRecorder",this.mediaRecorder);var o=[];this.mediaRecorder.ondataavailable=function(e){o.push(e.data)},this.mediaRecorder.onstop=function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(n){var c,r,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("video onStop"),c=new Blob(o,{type:"video/mp4"}),o=[],r=function(e){var t=new FileReader;return t.readAsDataURL(e),new Promise((function(e){t.onloadend=function(){e(t.result)}}))},t.next=6,r(c);case 6:l=t.sent,e.$store.commit("setVideo",l),e.$store.commit("setPhoto",null),e.showVideoPreview=!0;case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.mediaRecorder.start()},onClickClosePhotoPreview:function(){console.log("close photo"),this.showPhotoPreview=!1,this.$store.commit("setPhoto",null)},onClickCloseVideoPreview:function(){console.log("close video"),this.showVideoPreview=!1,this.showPhotoPreview=!1,this.$store.commit("setVideo",null)},capturePhoto:function(e){this.$store.state.video?console.log("video exists, capturePhoto is escaped"):(console.log("capturePhoto: ".concat(e," icon is pressed")),e===this.$store.state.activeEffectIcon&&!1===this.longPressActive&&(console.log("capturePhoto: ".concat(e," is at center, take screen shot")),this.deepARInstance.takeScreenshot()))},onElementChange:function(e){console.log("onElementChange: change to ",e),this.changeEffect(e)},initialize:function(){var e=this;window.innerWidth>window.innerHeight&&(this.canvasWidth=Math.floor(.66*window.innerHeight));var t=DeepAR({canvasWidth:this.canvasWidth,canvasHeight:this.canvasHeight,licenseKey:"c94cd494f31234c2c4f1e46fabadbfbde29c1d44f4ff4f82ca1cbacc234d73f22cb2885f618aa041",canvas:document.getElementById("deepar-canvas"),numberOfFaces:1,libPath:"/lib",segmentationInfoZip:"segmentation.zip",onInitialize:function(){console.log("onInitialize callback",t),t.startVideo(!0),console.log("initial effect loading (lion)"),e.$store.commit("setEffectLoadingTrue",0),t.switchEffect(0,"slot","/effects/lion",(function(){e.$store.commit("setEffectLoadingFalse",0)}))}});t.onCameraPermissionAsked=function(){console.log("camera permission asked")},t.onCameraPermissionGranted=function(){console.log("camera permission granted")},t.onCameraPermissionDenied=function(){console.log("camera permission denied")},t.onScreenshotTaken=function(t){console.log("screenshot taken"),e.$store.commit("setPhoto",t),e.showPhotoPreview=!0},t.onImageVisibilityChanged=function(e){console.log("image visible",e)},t.onFaceVisibilityChanged=function(e){console.log("face visible",e)},t.onVideoStarted=function(){},t.downloadFaceTrackingModel("/lib/models-68-extreme.bin",(function(){console.log("face tracking model ready"),e.$store.commit("setFaceTrackingModelReady",!0)})),this.deepARInstance=t,console.log("initialize() ends.")},changeEffect:function(e){var t=this;switch(console.log("".concat(e," selected")),e){case 0:this.$store.commit("setActiveEffectIcon","lion"),this.deepARInstance.clearEffect("slot"),this.$store.commit("setEffectLoadingTrue",0),this.deepARInstance.switchEffect(0,"slot","/effects/lion",(function(){console.log("changeEffect: changed effect to lion"),t.$store.commit("setEffectLoadingFalse",0)}));break;case 1:this.$store.commit("setActiveEffectIcon","aviators"),this.deepARInstance.clearEffect("slot"),this.$store.commit("setEffectLoadingTrue",1),this.deepARInstance.switchEffect(0,"slot","/effects/aviators",(function(){console.log("changeEffect: changed effect to aviators"),t.$store.commit("setEffectLoadingFalse",1)}));break;case 2:this.$store.commit("setActiveEffectIcon","beard"),this.deepARInstance.clearEffect("slot"),this.$store.commit("setEffectLoadingTrue",2),this.deepARInstance.switchEffect(0,"slot","/effects/beard",(function(){console.log("changeEffect: changed effect to beard"),t.$store.commit("setEffectLoadingFalse",2)}));break;case 3:this.$store.commit("setActiveEffectIcon","dalmatian"),this.deepARInstance.clearEffect("slot"),this.$store.commit("setEffectLoadingTrue",3),this.deepARInstance.switchEffect(0,"slot","/effects/dalmatian",(function(){console.log("changeEffect: changed effect to dalmation"),t.$store.commit("setEffectLoadingFalse",3)}));break;case 4:this.$store.commit("setActiveEffectIcon","flowers"),this.deepARInstance.clearEffect("slot"),this.$store.commit("setEffectLoadingTrue",4),this.deepARInstance.switchEffect(0,"slot","/effects/flowers",(function(){console.log("changeEffect: changed effect to flowers"),t.$store.commit("setEffectLoadingFalse",4)}));break;case 5:this.$store.commit("setActiveEffectIcon","koala"),this.deepARInstance.clearEffect("slot"),this.$store.commit("setEffectLoadingTrue",5),this.deepARInstance.switchEffect(0,"slot","/effects/koala",(function(){console.log("changeEffect: changed effect to koala"),t.$store.commit("setEffectLoadingFalse",5)}));break;case 6:this.$store.commit("setActiveEffectIcon","background_segmentation"),this.deepARInstance.clearEffect("slot"),this.$store.commit("setEffectLoadingTrue",6),this.deepARInstance.switchEffect(0,"slot","/effects/background_segmentation",(function(){console.log("changeEffect: changed effect to background_segmentation"),t.$store.commit("setEffectLoadingFalse",6)}));break;case 7:this.$store.commit("setActiveEffectIcon","teddycigar"),this.deepARInstance.clearEffect("slot"),this.$store.commit("setEffectLoadingTrue",7),this.deepARInstance.switchEffect(0,"slot","/effects/teddycigar",(function(){console.log("changeEffect: changed effect to teddycigar"),t.$store.commit("setEffectLoadingFalse",7)}));break;default:console.log("effect not found")}}},mounted:function(){this.deepARInstance||this.initialize()},beforeDestroy:function(){console.log("before Destory"),this.deepARInstance.stopVideo(),this.deepARInstance.shutdown()}},d=f,h=(o(411),o(60)),component=Object(h.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.faceTrackingModelReady?e._e():n("div",{staticClass:"absolute top-0 bottom-0 left-0 right-0 z-40 bg-white"},[e._m(0)]),e._v(" "),e.showPhotoPreview?n("div",{staticClass:"absolute top-0 bottom-0 left-0 right-0 z-30"},[n("img",{staticClass:"fixed top-0 right-0 w-16 h-16 p-3",attrs:{src:o(375),alt:"close"},on:{click:e.onClickClosePhotoPreview}}),e._v(" "),n("img",{attrs:{src:e.photo,alt:"photo"}}),e._v(" "),n("div",{staticClass:"fixed bottom-0 flex justify-center w-full mb-8"},[n("div",{staticClass:"p-2 bg-white rounded-full",on:{click:e.onClickPhotoTick}},[n("img",{staticClass:"w-16 h-16",attrs:{src:o(355),alt:""}})])])]):e._e(),e._v(" "),e.showVideoPreview?n("div",{staticClass:"absolute top-0 bottom-0 left-0 right-0 z-30"},[n("img",{staticClass:"fixed top-0 right-0 z-40 w-16 h-16 p-3",attrs:{src:o(375),alt:"close"},on:{click:e.onClickCloseVideoPreview}}),e._v(" "),e.video?n("video",{attrs:{src:e.video,autoplay:"",loop:"",playsinline:""}}):e._e(),e._v(" "),n("div",{staticClass:"fixed bottom-0 z-40 flex justify-center w-full mb-8"},[n("div",{staticClass:"p-2 bg-white rounded-full",on:{click:e.onClickVideoTick}},[n("img",{staticClass:"w-16 h-16",attrs:{src:o(355),alt:""}})])])]):e._e(),e._v(" "),n("canvas",{ref:"canvas",staticClass:"deepar",attrs:{id:"deepar-canvas",oncontextmenu:"event.preventDefault()"}}),e._v(" "),n("div",{staticClass:"fixed bottom-0 z-20 w-full py-3 mb-10 slick-background"},[n("VueSlickCarousel",e._b({on:{afterChange:e.onElementChange}},"VueSlickCarousel",e.settings,!1),e._l(e.effectList,(function(t){return n("effect-icon-button",{key:t.id,attrs:{icon:t.name,loading:t.loading},on:{click:function(o){return e.capturePhoto(t.name)},"long-press-start":function(o){return e.onLongPressStart(t.name)},"long-press-stop":function(o){return e.onLongPressStop(t.name)}}})})),1)],1)])}),[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"flex flex-col items-center justify-center w-full h-full text-2xl text-gray-900"},[o("div",{staticClass:"lato-font"},[e._v("Loading Face Detection Model...")]),e._v(" "),o("div",{staticClass:"lato-font"},[e._v("Please wait a few seconds :)")])])}],!1,null,null,null);t.default=component.exports;installComponents(component,{EffectIconButton:o(372).default})},372:function(e,t,o){"use strict";o.r(t);var n=o(356),c=o.n(n),r={components:{Spinner:o(345).default},directives:{"long-press":c.a},props:{icon:{type:String},loading:{type:Boolean}},data:function(){return{longPressActive:!1}},computed:{activeEffectIcon:function(){return this.$store.state.activeEffectIcon},isLoading:function(){if(console.log(this.$store.state.activeEffectIcon+"|"+this.$store.state.loadingEffectIcon),this.$store.state.activeEffectIcon===this.$store.state.loadingEffectIcon)return!0},iconURL:function(){return"/thumbs/".concat(this.icon,".png")}},methods:{onClickHandler:function(){this.longPressActive||this.$emit("click")},onLongPressStartHandler:function(){this.longPressActive=!0,console.log("longPressActive is ".concat(this.longPressActive," inside EffectIconButton")),this.$emit("long-press-start")},onLongPressStopHandler:function(){this.longPressActive=!1,console.log("longPressActive is ".concat(this.longPressActive," inside EffectIconButton")),this.$emit("long-press-stop")}}},l=(o(357),o(60)),component=Object(l.a)(r,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{directives:[{name:"long-press",rawName:"v-long-press",value:500,expression:"500"}],staticClass:"flex items-center rounded-full focus:outline-none longpress-prevent-default",class:[e.activeEffectIcon===e.icon?"border-8 border-white px-0":"px-2",e.longPressActive&&e.activeEffectIcon===e.icon?"animate-pulse":"animate-none"],on:{click:e.onClickHandler,"long-press-start":e.onLongPressStartHandler,"long-press-stop":e.onLongPressStopHandler}},[o("div",{staticClass:"relative"},[e.loading?o("Spinner",{staticClass:"absolute top-0 bottom-0 left-0 right-0"}):e._e(),e._v(" "),o("img",{staticClass:"flex items-center justify-center object-fill",class:[e.activeEffectIcon===e.icon?"":"border-white rounded-full border-4",e.loading?"opacity-50":""],attrs:{src:e.iconURL}})],1)])}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{Spinner:o(345).default})},375:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0id2hpdGUiIHdpZHRoPSIxOHB4IiBoZWlnaHQ9IjE4cHgiPjxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiLz48cGF0aCBkPSJNMTkgNi40MUwxNy41OSA1IDEyIDEwLjU5IDYuNDEgNSA1IDYuNDEgMTAuNTkgMTIgNSAxNy41OSA2LjQxIDE5IDEyIDEzLjQxIDE3LjU5IDE5IDE5IDE3LjU5IDEzLjQxIDEyeiIvPjwvc3ZnPg=="},376:function(e,t,o){var content=o(412);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(93).default)("b3044f40",content,!0,{sourceMap:!1})},411:function(e,t,o){"use strict";o(376)},412:function(e,t,o){var n=o(92)(!1);n.push([e.i,"@import url(https://fonts.googleapis.com/css2?family=Lato&display=swap);"]),n.push([e.i,'.lato-font{font-family:"Lato",sans-serif}canvas.deepar{border:0;background-color:#000;display:block;margin:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);z-index:10}.thumb{display:flex;justify-content:center;align-items:center}.slick-background{background-color:transparent}.longpress-prevent-default{-webkit-user-select:none;-webkit-touch-callout:none}.longPressEffect{--transform-translate-x:0;--transform-translate-y:0;--transform-rotate:0;--transform-skew-x:0;--transform-skew-y:0;--transform-scale-x:1;--transform-scale-y:1;transform:translateX(var(--transform-translate-x)) translateY(var(--transform-translate-y)) rotate(var(--transform-rotate)) skewX(var(--transform-skew-x)) skewY(var(--transform-skew-y)) scaleX(var(--transform-scale-x)) scaleY(var(--transform-scale-y));--transform-scale-x:1.5;--transform-scale-y:1.5}',""]),e.exports=n}}]);