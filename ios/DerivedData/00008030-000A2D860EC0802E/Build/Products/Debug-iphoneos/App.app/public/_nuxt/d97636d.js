(window.webpackJsonp=window.webpackJsonp||[]).push([[31,9],{352:function(e,t,n){var content=n(361);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(93).default)("1188c830",content,!0,{sourceMap:!1})},360:function(e,t,n){"use strict";n(352)},361:function(e,t,n){var o=n(92)(!1);o.push([e.i,"@import url(https://fonts.googleapis.com/css2?family=Montserrat&display=swap);"]),o.push([e.i,'.montserrat-font{font-family:"Montserrat",sans-serif}.box-shadow:after{content:"";position:absolute;width:100%;bottom:1px;z-index:-1;transform:scale(.9);box-shadow:9px 0 0 0 #000}',""]),e.exports=o},373:function(e,t,n){"use strict";n.r(t);var o={data:function(){return{showGameModal:!0}},methods:{onClickNoThanks:function(){this.$emit("close-modal")},onClickGame:function(e){this.showGameModal=!1,this.$emit("start-game",e)}}},l=(n(360),n(60)),component=Object(l.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"absolute bottom-0 w-full bg-white shadow-2xl rounded-t-xl"},[e._m(0),e._v(" "),n("div",{staticClass:"flex flex-col w-full"},[n("div",{staticClass:"flex w-full justify-evenly"},[n("button",{staticClass:"w-1/2 h-16 mx-4 mt-4 mb-2 text-white rounded-xl bg-brandPurple"},[e._v("\n        Would you rather?\n      ")]),e._v(" "),n("button",{staticClass:"w-1/2 h-16 mx-4 mt-4 mb-2 text-white rounded-xl bg-modalBtnOrange",on:{click:function(t){return e.onClickGame("Never have I ever")}}},[e._v("\n        Never have I ever\n      ")])]),e._v(" "),e._m(1)]),e._v(" "),n("div",{staticClass:"mx-4 mt-4 mb-6 text-center text-gray-600 underline",on:{click:e.onClickNoThanks}},[e._v("\n    No thanks\n  ")])])}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flex items-center justify-center px-6 pt-8 pb-4"},[n("p",{staticClass:"text-center montserrat-font"},[e._v("\n      Looks like you guys want to play a game :)"),n("br"),e._v("\n      Here are some good suggestions!\n    ")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flex w-full justify-evenly"},[n("button",{staticClass:"w-1/2 h-16 mx-4 mt-4 mb-2 text-white rounded-xl bg-modalBtnGreen"},[e._v("\n        Two truths & one lie\n      ")]),e._v(" "),n("button",{staticClass:"w-1/2 h-16 mx-4 mt-4 mb-2 text-white rounded-xl bg-modalBtnBlue"},[e._v("\n        20 Questions\n      ")])])}],!1,null,null,null);t.default=component.exports},382:function(e,t,n){var content=n(424);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(93).default)("3480e9ba",content,!0,{sourceMap:!1})},423:function(e,t,n){"use strict";n(382)},424:function(e,t,n){var o=n(92)(!1);o.push([e.i,"@import url(https://fonts.googleapis.com/css2?family=Lato&display=swap);"]),o.push([e.i,'.lato-font{font-family:"Lato",sans-serif}.fade-enter-active,.fade-leave-active{transition:opacity .5s}.fade-enter,.fade-leave-active{opacity:0}.receive{color:#1a202c;color:rgba(26,32,44,var(--text-opacity));background-color:#e2e8f0;background-color:rgba(226,232,240,var(--bg-opacity));border-bottom-right-radius:1.5rem;border-bottom-left-radius:.375rem}.receive,.send{--text-opacity:1;--bg-opacity:1;border-top-left-radius:1.5rem;border-top-right-radius:1.5rem;padding:0 1rem .75rem}.send{background-color:#89287c;background-color:rgba(137,40,124,var(--bg-opacity));color:#fff;color:rgba(255,255,255,var(--text-opacity));border-bottom-right-radius:.375rem;border-bottom-left-radius:1.5rem}.messagesContainer{display:flex;flex-direction:column;background-color:hsla(0,0%,100%,.9)}.body{overflow:hidden}.message-box-max-width{max-width:70%}',""]),e.exports=o},489:function(e,t,n){"use strict";n.r(t);var o,l,r=n(162),c=n(12),m=(n(52),n(94),n(97),n(98),n(163),n(373)),d=n(62),v={components:{GameModal:m.default},data:function(){return{messages:[],input:"",messageLoader:null,userIsScrolling:!1,showGameModal:!0,showNHIESetupWindow:!1,showNHIEGameWindow:!1,NHIECategory:"harmless",NHIEHarmlessContent:["fainted","been to the hospital","had a paranormal experience","gotten stitches"],NHIEDelicateContent:["fallen in love","started a hashtag","been on TV","lied to my best friend"],NHIEOffensiveContent:["cheated","ruined someone else's vacation","used someone else's toothbrush","broke a bone"],NHIEUserSelections:[]}},computed:{messageTargetAvatar:function(){return this.$store.state.messageTargetAvatar},messageTargetAvatarType:function(){return this.$store.state.messageTargetAvatarType},messageTargetName:function(){return this.$store.state.messageTargetName},messageChannelName:function(){return this.$store.state.messageChannelName}},methods:{handleScroll:function(e){this.userIsScrolling=!0,console.log("scrolling detected!!",this.userIsScrolling)},scrollToBottom:function(){var e=document.getElementById("topBar"),t=document.getElementById("inputs"),n=document.getElementById("messages");n.style.height=window.innerHeight-e.offsetHeight-t.offsetHeight+"px",window.setTimeout((function(){n.scrollTop=n.scrollHeight,console.log("scrolled")}),100)},onClickBack:function(){this.$router.push("/messages")},formattedDate:function(e){return new Date(e).toLocaleString("en-US",{hour12:!0,weekday:"short",hour:"numeric",minute:"numeric"})},loadMessages:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var n,l,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("loading message"),t.prev=1,t.next=4,e.$apollo.query({query:Object(d.a)(o||(o=Object(r.a)(["\n            query($name: String!) {\n              getChannel(name: $name) {\n                createdAt\n                messages {\n                  by {\n                    nickname\n                  }\n                  content\n                  timestamp\n                }\n                name\n              }\n            }\n          "]))),variables:{name:e.$store.state.messageChannelName}});case 4:n=t.sent,console.log("loadMessages results",n.data.getChannel.messages),l=e.messages.length,c=n.data.getChannel.messages.length,e.messages=n.data.getChannel.messages,c>l&&(e.scrollToBottom(),console.log("call scrollToBottom")),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),console.error(t.t0);case 15:case"end":return t.stop()}}),t,null,[[1,12]])})))()},onClickSendMessage:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.input){t.next=2;break}return t.abrupt("return");case 2:return console.log("sending message",e.input),n=[{by:{nickname:e.$store.state.user.nickname},in:{name:e.$store.state.messageChannelName},content:e.input,timestamp:(new Date).toISOString()}],console.log("addMessage Input:",n),t.prev=5,t.next=8,e.$apollo.mutate({mutation:Object(d.a)(l||(l=Object(r.a)(["\n            mutation($input: [AddMessageInput!]!) {\n              addMessage(input: $input) {\n                message {\n                  by {\n                    name\n                  }\n                  in {\n                    name\n                  }\n                  content\n                  timestamp\n                }\n              }\n            }\n          "]))),variables:{input:n}});case 8:o=t.sent,console.log("addMessage results",o),e.input="",t.next=16;break;case 13:t.prev=13,t.t0=t.catch(5),console.error(t.t0);case 16:e.loadMessages();case 17:case"end":return t.stop()}}),t,null,[[5,13]])})))()},closeModal:function(){this.showGameModal=!1},startGame:function(e){console.log("startGame",e),this.showGameModal=!1,this.showNHIESetupWindow=!0},onClickStartNHIE:function(){this.showNHIESetupWindow=!1,this.showNHIEGameWindow=!0},onClickNHIEItem:function(e){if(console.log("NHIE",e),this.NHIEUserSelections.includes(e)){for(var i=0;i<this.NHIEUserSelections.length;i++)this.NHIEUserSelections[i]===e&&this.NHIEUserSelections.splice(i,1);console.log("NHIE",this.NHIEUserSelections)}else this.NHIEUserSelections.push(e),console.log("NHIE",this.NHIEUserSelections)}},mounted:function(){var e=this;console.log("message.vue mounted."),window.addEventListener("scroll",this.handleScroll),this.messageLoader=setInterval((function(){e.loadMessages()}),1e3)},beforeRouteLeave:function(e,t,n){console.log("message.vue is unmounted."),clearInterval(this.messageLoader),console.log("messageLoader stopped"),window.removeEventListener("scroll",this.handleScroll),console.log("remove scroll event listener"),n()},destroyed:function(){this.messageLoader&&clearInterval(this.messageLoader),window.removeEventListener("scroll",this.handleScroll)}},f=(n(423),n(60)),component=Object(f.a)(v,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"max-h-screen"},[n("div",{staticClass:"sticky top-0 z-10 flex items-center justify-between w-full pt-2 pb-2 bg-white border border-t-0 border-b-1",attrs:{id:"topBar"}},[n("img",{staticClass:"w-12 pl-4",attrs:{src:"/img/arrow-back-24px.svg",alt:""},on:{click:e.onClickBack}}),e._v(" "),n("div",{staticClass:"flex items-center w-full ml-2"},["IMAGE"==e.messageTargetAvatarType?n("img",{staticClass:"object-cover w-12 h-12 rounded-full",attrs:{src:e.messageTargetAvatar,alt:"Avatar"}}):e._e(),e._v(" "),"VIDEO"==e.messageTargetAvatarType?n("video",{staticClass:"object-cover w-12 h-12 rounded-full",attrs:{autoplay:"",loop:"",playsinline:"",src:e.messageTargetAvatar,alt:"Avatar Video"}}):e._e(),e._v(" "),n("div",{staticClass:"ml-3 text-lg font-semibold lato-font"},[e._v("\n        "+e._s(e.messageTargetName)+"\n      ")])]),e._v(" "),n("div",{staticClass:"flex items-center justify-around mr-4"},[n("img",{staticClass:"w-10 mr-2",attrs:{src:"/img/video-call.svg",alt:""},on:{click:function(t){e.showGameModal=!e.showGameModal}}}),e._v(" "),n("img",{staticClass:"w-10",attrs:{src:"/img/phone-call.svg",alt:""}})])]),e._v(" "),n("transition",{attrs:{name:"fade"}},[e.showNHIESetupWindow?n("div",{staticClass:"absolute top-auto z-20 w-full bg-white shadow-lg"},[n("div",{staticClass:"flex h-10"},[n("button",{staticClass:"w-1/3 text-white bg-modalBtnGreen",on:{click:function(t){e.NHIECategory="harmless"}}},[e._v("\n          Harmless\n        ")]),e._v(" "),n("button",{staticClass:"w-1/3 text-white bg-modalBtnOrange",on:{click:function(t){e.NHIECategory="delicate"}}},[e._v("\n          Delicate\n        ")]),e._v(" "),n("button",{staticClass:"w-1/3 text-white bg-modalBtnBlue",on:{click:function(t){e.NHIECategory="offensive"}}},[e._v("\n          Offensive\n        ")])]),e._v(" "),n("div",{staticClass:"px-4 py-2 text-xl font-semibold text-brandPurple"},[e._v("\n        Never have I ever ...\n      ")]),e._v(" "),"harmless"==e.NHIECategory?n("div",{staticClass:"flex flex-col"},e._l(e.NHIEHarmlessContent,(function(t){return n("div",{key:t,staticClass:"flex items-center"},[n("div",{staticClass:"mx-4 my-2 text-lg text-gray-800 lato-font"},[e._v("\n            "+e._s(t)+"\n          ")]),e._v(" "),n("button",{staticClass:"h-8 px-2 text-sm font-semibold bg-white border border-purple-700 rounded-2xl",class:[e.NHIEUserSelections.includes(t)?"bg-modalBtnGreen text-white":"text-brandPurple"],on:{click:function(n){return e.onClickNHIEItem(t)}}},[e._v("\n            I Have\n          ")])])})),0):e._e(),e._v(" "),"delicate"==e.NHIECategory?n("div",{staticClass:"flex flex-col"},e._l(e.NHIEDelicateContent,(function(t){return n("div",{key:t,staticClass:"flex items-center"},[n("div",{staticClass:"mx-4 my-2 text-lg text-gray-800 lato-font"},[e._v("\n            "+e._s(t)+"\n          ")]),e._v(" "),n("button",{staticClass:"h-8 px-2 text-sm font-semibold bg-white border border-purple-700 rounded-2xl",class:[e.NHIEUserSelections.includes(t)?"bg-modalBtnGreen text-white":"text-brandPurple"],on:{click:function(n){return e.onClickNHIEItem(t)}}},[e._v("\n            I Have\n          ")])])})),0):e._e(),e._v(" "),"offensive"==e.NHIECategory?n("div",{staticClass:"flex flex-col"},e._l(e.NHIEOffensiveContent,(function(t){return n("div",{key:t,staticClass:"flex items-center"},[n("div",{staticClass:"mx-4 my-2 text-lg text-gray-800 lato-font"},[e._v("\n            "+e._s(t)+"\n          ")]),e._v(" "),n("button",{staticClass:"h-8 px-2 text-sm font-semibold bg-white border border-purple-700 rounded-2xl",class:[e.NHIEUserSelections.includes(t)?"bg-modalBtnGreen text-white":"text-brandPurple"],on:{click:function(n){return e.onClickNHIEItem(t)}}},[e._v("\n            I Have\n          ")])])})),0):e._e(),e._v(" "),n("div",{staticClass:"mx-3 mt-2 text-center text-blue-600 underline"},[e._v("\n        Custom Questions\n      ")]),e._v(" "),e.NHIEUserSelections.length<5?n("div",{staticClass:"mb-2 mr-6 text-lg font-semibold text-right text-green-500 lato-font"},[e._v("\n        "+e._s(e.NHIEUserSelections.length)+" / 5\n      ")]):n("div",{staticClass:"mb-2 mr-6 text-lg font-semibold text-right text-green-500 lato-font",on:{click:e.onClickStartNHIE}},[e._v("\n        Start Game\n      ")])]):e._e()]),e._v(" "),n("transition",{attrs:{name:"fade"}},[e.showNHIEGameWindow?n("div",{staticClass:"absolute top-auto z-20 w-full bg-white shadow-lg"},[n("p",{staticClass:"mt-4 text-2xl font-semibold text-center"},[e._v("Never Have I Ever")]),e._v(" "),n("p",{staticClass:"m-2 text-lg text-center"},[e._v("\n        "+e._s(e.messageTargetName)+" has never been to the hospital.\n      ")]),e._v(" "),n("div",{staticClass:"flex m-2"},[n("button",{staticClass:"w-1/2 h-12 mx-4 mt-4 mb-2 text-white rounded-xl bg-brandPurple",on:{click:function(t){e.showNHIEGameWindow=!1}}},[e._v("\n          True\n        ")]),e._v(" "),n("button",{staticClass:"w-1/2 h-12 mx-4 mt-4 mb-2 text-white rounded-xl bg-modalBtnOrange",on:{click:function(t){e.showNHIEGameWindow=!1}}},[e._v("\n          False\n        ")])])]):e._e()]),e._v(" "),n("div",{staticClass:"z-0 overflow-scroll messagesContainer",attrs:{id:"messages"}},[n("transition-group",{attrs:{name:"fade"}},e._l(e.messages,(function(t){return n("div",{key:t.timestamp,staticClass:"flex w-full px-2 my-2 lato-font",class:[t.by.nickname===e.messageTargetName?"justify-start":"justify-end"]},[n("div",{staticClass:"flex flex-col text-sm leading-tight message-box-max-width",class:[t.by.nickname===e.messageTargetName?"receive":"send"]},[n("p",{staticClass:"break-words whitespace-pre-line"},[e._v("\n            "+e._s(t.content)+"\n          ")]),e._v(" "),n("div",{staticClass:"flex items-center mt-2 mb-1 text-xs"},[n("div",{staticClass:"mr-2"},[e._v(e._s(e.formattedDate(t.timestamp)))]),e._v(" "),t.by.nickname!==e.messageTargetName?n("img",{attrs:{src:"/img/white-sent-icon.svg",alt:""}}):e._e()])])])})),0)],1),e._v(" "),n("div",{staticClass:"fixed bottom-0 flex w-full h-20 py-4 bg-white justify-evenly",attrs:{id:"inputs"}},[n("img",{staticClass:"w-5 mx-2",attrs:{src:"/img/plus-icon.svg",alt:""}}),e._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.input,expression:"input"}],staticClass:"w-8/12 h-12 p-3 pl-5 bg-gray-300 rounded-full outline-none",attrs:{type:"text",placeholder:"New Message"},domProps:{value:e.input},on:{input:function(t){t.target.composing||(e.input=t.target.value)}}}),e._v(" "),e.input?n("div",{staticClass:"flex items-center justify-center w-12 h-12 mx-2 bg-gray-200 rounded-full shadow-md"},[n("img",{staticClass:"flex items-center justify-center w-2/3",attrs:{src:"/img/send-24px.svg",alt:""},on:{click:e.onClickSendMessage}})]):n("div",{staticClass:"flex"},[n("img",{staticClass:"w-6 ml-2",attrs:{src:"/img/camera-icon.svg",alt:""}}),e._v(" "),n("img",{staticClass:"w-6 mx-2",attrs:{src:"/img/record-icon.svg",alt:""}})])]),e._v(" "),n("transition",{attrs:{name:"fade"}},[e.showGameModal?n("GameModal",{on:{"close-modal":e.closeModal,"start-game":e.startGame}}):e._e()],1)],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{GameModal:n(373).default})}}]);